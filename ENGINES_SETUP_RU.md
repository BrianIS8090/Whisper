# Настройка движков распознавания Wisper

В этом документе описано, как настроить API ключи и окружение для всех трех режимов работы программы: **Yandex SpeechKit**, **Groq API** и **Local Whisper**.

Все настройки сохраняются в файле `.env` в корневой папке программы.

---

## 1. Yandex SpeechKit (Гибридный режим)

Этот режим использует комбинацию двух сервисов Яндекса для максимального качества:
1.  **SpeechKit (STT v1)** — для быстрого распознавания голоса.
2.  **YandexGPT (Foundation Models)** — для "умной" расстановки знаков препинания, исправления грамматики и форматирования числительных.

### Пошаговая настройка

#### Шаг 1: Регистрация и облако
1.  Зарегистрируйтесь в [Yandex Cloud](https://console.cloud.yandex.ru/).
2.  Создайте платежный аккаунт и пополните баланс (или используйте грант).
3.  Создайте **Каталог** (Folder).

#### Шаг 2: Получение Folder ID
1.  На главной странице консоли выберите ваш каталог.
2.  Вверху страницы, рядом с именем каталога, будет указан **ID каталога** (например, `b1gnnuu...`).
3.  Скопируйте его и вставьте в `.env`:
    ```ini
    YANDEX_FOLDER_ID=ваш_folder_id
    ```

#### Шаг 3: Создание Сервисного Аккаунта
1.  В меню слева перейдите в раздел **"Сервисные аккаунты"**.
2.  Нажмите "Создать сервисный аккаунт".
3.  Придумайте имя (например, `wisper-bot`).
4.  **ВАЖНО: Роли (Roles)**. Добавьте **две** роли:
    *   `ai.speechkit-stt.user` — дает право распознавать голос.
    *   `ai.languageModels.user` — дает право использовать нейросеть (YandexGPT) для исправления текста.
5.  Нажмите "Создать".

#### Шаг 4: Получение API Key
1.  Нажмите на созданный сервисный аккаунт.
2.  В верхней панели нажмите кнопку **"Создать новый ключ"** -> **"Создать API-ключ"**.
3.  Появится окно с ключом (начинается на `AQVN...`). Скопируйте его **сразу** (потом его нельзя будет посмотреть).
4.  Вставьте в `.env`:
    ```ini
    YANDEX_API_KEY=ваш_api_ключ
    ```

---

## 2. Groq API (Облачный Whisper)

Самый быстрый режим. Использует модель `whisper-large-v3` на чипах LPU.

1.  Перейдите на [console.groq.com](https://console.groq.com/).
2.  Авторизуйтесь.
3.  В меню слева выберите **API Keys**.
4.  Нажмите **Create API Key**.
5.  Скопируйте ключ (начинается на `gsk_...`).
6.  Вставьте в `.env`:
    ```ini
    GROQ_API_KEY=ваш_ключ_groq
    ```

---

## 3. Local Whisper (Локальный режим)

Работает полностью оффлайн на вашем компьютере. Не требует ключей.

### Настройка
В файле `.env` параметр `MODEL_SIZE` определяет размер модели:

```ini
MODEL_SIZE=small
```

**Доступные варианты:**
*   `tiny`, `base` — очень быстрые, низкая точность.
*   `small` — (рекомендуется) баланс скорости и качества.
*   `medium` — точнее, но медленнее.
*   `turbo` — оптимизированная быстрая версия (требует хорошего CPU).
*   `large` — максимальная точность, очень медленно без мощной видеокарты.

---

## Пример файла .env

После настройки ваш файл `.env` должен выглядеть примерно так:

```ini
# Ключи API
GROQ_API_KEY=gsk_8347583745...
YANDEX_API_KEY=AQVNw3485734...

# ID папки Яндекс (обязательно для YandexGPT)
YANDEX_FOLDER_ID=b1g...

# Настройки локальной модели
MODEL_SIZE=turbo

# Режим запуска по умолчанию (local, api, или yandex)
DEFAULT_MODE=yandex
```
